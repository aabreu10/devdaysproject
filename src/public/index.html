<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevDays Audit Dashboard</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="logo">
                <span>DevDays</span>
            </div>
            <ul class="nav-links">
                <li class="nav-item">
                    <a href="index.html" class="nav-link active">Audit Dashboard</a>
                </li>
                <li class="nav-item">
                    <a href="audit.html" class="nav-link">Audit Logs</a>
                </li>
                <li class="nav-item">
                    <a href="weather-audit.html" class="nav-link">Weather Audit</a>
                </li>
            </ul>
        </aside>

        <main class="main-content">
            <header>
                <h1 class="page-title">Audit Overview</h1>
                <div class="action-bar" style="display: flex; gap: 10px; align-items: center; margin-bottom: 0;">
                    <input type="text" id="repo-owner" placeholder="Owner" class="input-text" style="width: 100px;">
                    <input type="text" id="repo-name" placeholder="Repo" class="input-text" style="width: 120px;">
                    <button class="btn-secondary" id="btn-sync-github">Sync Issues</button>
                    <button class="btn-primary" id="btn-run-audit">Run Audit</button>
                </div>
            </header>

            <div class="content-wrapper">
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Last Audit Result</h3>
                        </div>
                        <div class="card-content">
                            <div class="stat-value" id="stat-last-result">-</div>
                            <div class="stat-trend" id="stat-last-time">Never run</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Compliance Rate</h3>
                        </div>
                        <div class="card-content">
                            <div class="stat-value" id="stat-compliance-rate">-</div>
                            <div class="stat-trend trend-up">All time</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Avg. Bug Ratio</h3>
                        </div>
                        <div class="card-content">
                            <div class="stat-value" id="stat-avg-bug-ratio">-</div>
                            <div class="stat-trend">Issues with "Bug" in title</div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Total Audits</h3>
                        </div>
                        <div class="card-content">
                            <div class="stat-value" id="stat-total-audits">-</div>
                            <div class="stat-trend trend-up">Executed runs</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-charts">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" style="font-size: 1rem; font-weight: 600; color: hsl(var(--foreground))">Bug Ratio History</h3>
                            <p style="font-size: 0.875rem; color: hsl(var(--muted-foreground)); margin: 0;">Percentage of bugs detected over recent audits</p>
                        </div>
                        <div class="chart-container">
                            <canvas id="chart-history"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" style="font-size: 1rem; font-weight: 600; color: hsl(var(--foreground))">Last Audit Breakdown</h3>
                            <p style="font-size: 0.875rem; color: hsl(var(--muted-foreground)); margin: 0;">Issue composition by state</p>
                        </div>
                        <div class="chart-container">
                            <canvas id="chart-composition"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card full-width">
                    <div class="card-header">
                        <h3 class="card-title" style="font-size: 1.125rem; font-weight: 600; color: hsl(var(--foreground))">Recent Audits</h3>
                        <p style="font-size: 0.875rem; color: hsl(var(--muted-foreground)); margin: 0;">Latest compliance checks executed</p>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Result</th>
                                <th>Bugs / Total</th>
                                <th>Ratio</th>
                            </tr>
                        </thead>
                        <tbody id="recent-activity-body">
                            <tr><td colspan="4">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </main>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
